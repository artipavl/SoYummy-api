{
  "openapi": "3.0.1",
  "info": {
    "version": "1.0.0",
    "title": "SoYummy",
    "description": "SoYummy"
  },
  "consumes": ["application/json", "multipare/form-data"],
  "produces": ["application/json"],
  "servers": [
    { "url": "http://localhost:3000/api" },
    { "url": "https://so-yummy-api.onrender.com/api" }
  ],
  "tags": [
    {
      "name": "Auth",
      "description": "Authorization endpoints"
    },
    {
      "name": "Recipe",
      "description": "Recipe"
    },
    {
      "name": "Ingredients",
      "description": "Ingredients"
    },
    {
      "name": "ownRecipes",
      "description": "ownRecipes"
    },
    {
      "name": "Ingredients",
      "description": "Ingredients"
    }
  ],
  "paths": {
    "/auth/register": {
      "post": {
        "tags": ["Auth"],
        "summary": "User registration",
        "parameters": [],
        "requestBody": {
          "description": "Registration's object",
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RegistrationRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Created",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RegistrationResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad request"
          },
          "409": {
            "description": "Conflict",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Email in use"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/auth/login": {
      "get": {
        "tags": ["Auth"],
        "summary": "User login",
        "requestBody": {
          "description": "Auth object",
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/LoginRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/LoginResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Email or password is wrong"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/auth/logout": {
      "post": {
        "tags": ["Auth"],
        "summary": "User logout",
        "security": [{ "Bearer": [] }],
        "responses": {
          "204": {
            "description": "No Content"
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/NotAuthorized"
                }
              }
            }
          }
        }
      }
    },
    "/auth/current": {
      "get": {
        "tags": ["Auth"],
        "summary": "User current",
        "security": [{ "Bearer": [] }],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/LoginResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/NotAuthorized"
                }
              }
            }
          }
        }
      }
    },
    "/auth/verify": {
      "post": {
        "tags": ["Auth"],
        "summary": "User verify",
        "parameters": [],
        "requestBody": {
          "description": "Auth object",
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/VerifyRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Verification email sent"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    },
    "/auth/:verificationToken": {
      "get": {
        "tags": ["Auth"],
        "summary": "User verification",
        "parameters": [
          {
            "in": "payh",
            "name": "verificationToken",
            "required": true,
            "type": "string",
            "description": "Uset verification token"
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Verification successful"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Not Found",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "User not found"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },

    "/recipes/main-page": {},
    "/recipes/:category": {},
    "/recipes/id/:id": {},

    "/ownRecipes": {
      "get": {
        "tags": ["ownRecipes"],
        "summary": "Get user recipes",
        "security": [{ "Bearer": [] }],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ownRecipesResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/NotAuthorized"
                }
              }
            }
          }
        }
      }
    },
    "/ownRecipes/addRecipe": {
      "post": {
        "tags": ["ownRecipes"],
        "summary": "Add user recipes",
        "security": [{ "Bearer": [] }],
        "requestBody": {
          "description": "Recipe object",
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ownRecipesAdd"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Created"
          },
          "400": {
            "description": "Bad request"
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/NotAuthorized"
                }
              }
            }
          }
        }
      }
    },
    "/ownRecipes/deleteRecipe": {
      "delete": {
        "tags": ["ownRecipes"],
        "summary": "delete user recipe",
        "security": [{ "Bearer": [] }],
        "requestBody": {
          "description": "Recipe id",
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ownRecipesDelete"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Delete success"
          },
          "400": {
            "description": "Bad request"
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/NotAuthorized"
                }
              }
            }
          }
        }
      }
    },

    "/ingredients": {},
    "/ingredients/list": {}
  },
  "components": {
    "schemas": {
      "RegistrationRequest": {
        "type": "object",
        "required": ["name", "email", "password"],
        "properties": {
          "name": {
            "type": "string",
            "description": "User's name",
            "example": "User"
          },
          "email": {
            "type": "string",
            "description": "User's email",
            "format": "email"
          },
          "password": {
            "type": "string",
            "description": "User's password",
            "example": "qwerty123"
          }
        }
      },
      "RegistrationResponse": {
        "type": "object",
        "properties": {
          "user": {
            "type": "object",
            "properties": {
              "email": {
                "type": "string",
                "description": "User's email",
                "format": "email"
              }
            }
          }
        }
      },

      "LoginRequest": {
        "type": "object",
        "required": ["email", "password"],
        "properties": {
          "email": {
            "type": "string",
            "description": "User's email",
            "format": "email"
          },
          "password": {
            "type": "string",
            "description": "User's password",
            "example": "qwerty123"
          }
        }
      },
      "LoginResponse": {
        "type": "object",
        "properties": {
          "user": {
            "type": "object",
            "properties": {
              "email": {
                "type": "string",
                "description": "User's email",
                "format": "email"
              },
              "name": {
                "type": "string",
                "description": "User's name",
                "example": "User"
              },
              "icon": {
                "type": "string",
                "description": "User's icon",
                "example": "Srting"
              }
            }
          },
          "token": {
            "type": "string",
            "description": "User's icon",
            "example": "Srting"
          }
        }
      },

      "VerifyRequest": {
        "type": "object",
        "required": ["email"],
        "properties": {
          "email": {
            "type": "string",
            "description": "User's email",
            "format": "email"
          }
        }
      },

      "ownRecipesResponse": {
        "type": "array",
        "items": {
          "type": "object",
          "properties": {
            "_id": {
              "type": "string",
              "description": "id",
              "example": "640cd5ac2d9fecf12e8897fc"
            },
            "title": {
              "type": "string",
              "description": "title",
              "example": "Spaghetti Bolognese"
            },
            "category": {
              "type": "string",
              "description": "category",
              "example": "Beef"
            },
            "area": {
              "type": "string",
              "description": "area",
              "example": "Italian"
            },
            "instructions": {
              "type": "string",
              "description": "instructions",
              "example": "Put the onion and oil in a large pan and fry over a fairly high heat for 3-4 mins. Add the garlic and mince and fry until they both brown. Add the mushrooms and herbs, and cook for another couple of mins.\r\n\r\nStir in the tomatoes, beef stock, tomato ketchup or purée, Worcestershire sauce and seasoning. Bring to the boil, then reduce the heat, cover and simmer, stirring occasionally, for 30 mins.\r\n\r\nMeanwhile, cook the spaghetti in a large pan of boiling, salted water, according to packet instructions. Drain well, run hot water through it, put it back in the pan and add a dash of olive oil, if you like, then stir in the meat sauce. Serve in hot bowls and hand round Parmesan cheese, for sprinkling on top."
            },
            "description": {
              "type": "string",
              "description": "description",
              "example": "An Italian pasta dish made with spaghetti and a meat-based sauce, typically containing beef, tomatoes, onions, garlic, and herbs."
            },
            "thumb": {
              "type": "string",
              "description": "thumb",
              "example": "https://www.themealdb.com/images/media/meals/sutysw1468247559.jpg"
            },
            "preview": {
              "type": "string",
              "description": "preview",
              "example": "https://res.cloudinary.com/ddbvbv5sp/image/upload/v1678560401/huqdxgwkvbhsfjqtexsm.jpg"
            },
            "time": {
              "type": "string",
              "description": "time",
              "example": "45"
            },
            "popularity": {
              "type": "intager",
              "description": "popularity",
              "example": "2"
            },
            "favorites": {
              "type": "array",
              "items": {
                "type": "string",
                "description": "time",
                "example": "640cd5ac2d9fecf12e8897ee"
              }
            },
            "likes": {
              "type": "array",
              "items": {
                "type": "string",
                "description": "time",
                "example": "640cd5ac2d9fecf12e8897ee"
              }
            },
            "youtube": {
              "type": "string",
              "description": "youtube",
              "example": "https://www.youtube.com/watch?v=-gF8d-fitkU"
            },
            "tags": {
              "type": "array",
              "items": {
                "type": "string",
                "description": "tags",
                "example": "Pasta"
              }
            },
            "createdAt": {
              "type": "string",
              "description": "createdAt",
              "example": "2023-03-11T19:25:33.240+00:00"
            },
            "updatedAt": {
              "type": "string",
              "description": "updatedAt",
              "example": "2023-03-11T19:25:33.240+00:00"
            },
            "ingredients": {
              "type": "array",
              "items": {
                "type": "object",
                "description": "ingredient",
                "properties": {
                  "id": {
                    "type": "string",
                    "description": "createdAt",
                    "example": "640c2dd963a319ea671e372e"
                  },
                  "measure": {
                    "type": "string",
                    "description": "createdAt",
                    "example": "2"
                  }
                }
              }
            }
          }
        }
      },
      "ownRecipesAdd": {
        "type": "object",
        "required": [
          "title",
          "category",
          "area",
          "instructions",
          "thumb",
          "time",
          "ingredients"
        ],
        "properties": {
          "title": {
            "type": "string",
            "description": "title",
            "example": "Spaghetti Bolognese"
          },
          "category": {
            "type": "string",
            "description": "category",
            "example": "Beef"
          },
          "area": {
            "type": "string",
            "description": "area",
            "example": "Italian"
          },
          "instructions": {
            "type": "string",
            "description": "instructions",
            "example": "Put the onion and oil in a large pan and fry over a fairly high heat for 3-4 mins. Add the garlic and mince and fry until they both brown. Add the mushrooms and herbs, and cook for another couple of mins.\r\n\r\nStir in the tomatoes, beef stock, tomato ketchup or purée, Worcestershire sauce and seasoning. Bring to the boil, then reduce the heat, cover and simmer, stirring occasionally, for 30 mins.\r\n\r\nMeanwhile, cook the spaghetti in a large pan of boiling, salted water, according to packet instructions. Drain well, run hot water through it, put it back in the pan and add a dash of olive oil, if you like, then stir in the meat sauce. Serve in hot bowls and hand round Parmesan cheese, for sprinkling on top."
          },
          "description": {
            "type": "string",
            "description": "description",
            "example": "An Italian pasta dish made with spaghetti and a meat-based sauce, typically containing beef, tomatoes, onions, garlic, and herbs."
          },
          "thumb": {
            "type": "string",
            "description": "thumb",
            "example": "https://www.themealdb.com/images/media/meals/sutysw1468247559.jpg"
          },
          "preview": {
            "type": "string",
            "description": "preview",
            "example": "https://res.cloudinary.com/ddbvbv5sp/image/upload/v1678560401/huqdxgwkvbhsfjqtexsm.jpg"
          },
          "time": {
            "type": "string",
            "description": "time",
            "example": "45"
          },
          "popularity": {
            "type": "intager",
            "description": "popularity",
            "example": "2"
          },
          "favorites": {
            "type": "array",
            "items": {
              "type": "string",
              "description": "time",
              "example": "640cd5ac2d9fecf12e8897ee"
            }
          },
          "likes": {
            "type": "array",
            "items": {
              "type": "string",
              "description": "time",
              "example": "640cd5ac2d9fecf12e8897ee"
            }
          },
          "youtube": {
            "type": "string",
            "description": "youtube",
            "example": "https://www.youtube.com/watch?v=-gF8d-fitkU"
          },
          "tags": {
            "type": "array",
            "items": {
              "type": "string",
              "description": "tags",
              "example": "Pasta"
            }
          },
          "createdAt": {
            "type": "string",
            "description": "createdAt",
            "example": "2023-03-11T19:25:33.240+00:00"
          },
          "updatedAt": {
            "type": "string",
            "description": "updatedAt",
            "example": "2023-03-11T19:25:33.240+00:00"
          },
          "ingredients": {
            "type": "array",
            "items": {
              "type": "object",
              "required": ["id", "example"],
              "description": "ingredient",
              "properties": {
                "id": {
                  "type": "string",
                  "description": "createdAt",
                  "example": "640c2dd963a319ea671e372e"
                },
                "measure": {
                  "type": "string",
                  "description": "createdAt",
                  "example": "2"
                }
              }
            }
          }
        }
      },
      "ownRecipesDelete": {
        "type": "object",
        "required": ["id"],
        "properties": {
          "id": {
            "type": "string",
            "description": "Id recipe",
            "example": "640c2dd963a319ea671e372e"
          }
        }
      },
      "Error": {
        "type": "object",
        "properties": {
          "error": {
            "type": "string",
            "example": "error"
          }
        }
      },
      "NotAuthorized": {
        "type": "object",
        "properties": {
          "message": {
            "type": "string",
            "example": "Not authorized"
          }
        }
      }
    },
    "securitySchemes": {
      "Bearer": {
        "type": "http",
        "scheme": "bearer",
        "bearerFormat": "JWT"
      }
    }
  }
}
